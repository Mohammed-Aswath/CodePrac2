<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CODEPRAC 2.0 - Competitive Programming Practice Platform</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="nav-brand">CODEPRAC 2.0</div>
            <ul class="nav-links">
                <li id="dashboardLink"><a href="#" data-nav="dashboard">Dashboard</a></li>
                <li id="adminLink" class="hidden"><a href="#" data-nav="admin">Admin Panel</a></li>
                <li id="collegeLink" class="hidden"><a href="#" data-nav="college">College</a></li>
                <li id="deptLink" class="hidden"><a href="#" data-nav="department">Department</a></li>
                <li id="batchLink" class="hidden"><a href="#" data-nav="batch">Batch</a></li>
                <li id="studentLink" class="hidden"><a href="#" data-nav="student">Practice</a></li>
                <li><button id="logoutBtn" class="btn btn-sm btn-secondary hidden">Logout</button></li>
            </ul>
        </div>
    </nav>

    <!-- Authentication Page -->
    <div id="authPage" class="hidden">
        <div class="auth-container">
            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h2>Login</h2>
                <input type="email" id="loginEmail" placeholder="Email" />
                <input type="password" id="loginPassword" placeholder="Password" />
                <button id="loginBtn" class="btn btn-primary">Login</button>
                <p>Don't have an account? <a href="#" id="toggleAuthForm">Register here</a></p>
                <div id="authMessage"></div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form hidden">
                <h2>Register</h2>
                <input type="text" id="registerName" placeholder="Full Name" />
                <input type="email" id="registerEmail" placeholder="Email" />
                <input type="password" id="registerPassword" placeholder="Password" />
                <select id="registerRole">
                    <option value="student">Student</option>
                    <option value="department">Department Admin</option>
                    <option value="college">College Admin</option>
                    <option value="admin">System Admin</option>
                </select>
                <button id="registerBtn" class="btn btn-primary">Register</button>
                <p>Already have an account? <a href="#" id="toggleAuthForm">Login here</a></p>
                <div id="authMessage"></div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <main id="mainApp" class="hidden">
        <div class="container">
            <div id="pageMessage"></div>

            <!-- Dashboard Page -->
            <div id="dashboardPage" data-page="dashboard" class="hidden">
                <h1>Dashboard</h1>
                <div id="dashboardMessage"></div>
                <div id="dashboardContent"></div>
                <div id="activitySection"></div>
            </div>

            <!-- Admin Panel Page -->
            <div id="adminPage" data-page="admin" class="hidden">
                <h1>Admin Panel</h1>
                <div id="adminMessage"></div>

                <div class="tabs">
                    <button data-admin-tab="colleges" class="tab-btn active">Colleges</button>
                    <button data-admin-tab="departments" class="tab-btn">Departments</button>
                    <button data-admin-tab="batches" class="tab-btn">Batches</button>
                    <button data-admin-tab="students" class="tab-btn">Students</button>
                    <button data-admin-tab="topics" class="tab-btn">Topics</button>
                    <button data-admin-tab="questions" class="tab-btn">Questions</button>
                    <button data-admin-tab="notes" class="tab-btn">Notes</button>
                </div>

                <div style="margin-top: 1.5rem;">
                    <!-- Colleges -->
                    <div data-admin-content="colleges" style="display: block;">
                        <button class="btn btn-primary"
                            onclick="Admin.editingCollegeId = null; document.getElementById('collegeName').value = ''; document.querySelector('#collegeModal .modal-header h3').textContent = 'Add College'; document.querySelector('#collegeModal [type=submit]').textContent = 'Create College'; UI.openModal('collegeModal');">Add
                            College</button>
                        <div id="collegesList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Departments -->
                    <div data-admin-content="departments" style="display: none;">
                        <button class="btn btn-primary" onclick="Admin.openAddDepartmentModal();">Add
                            Department</button>
                        <div id="departmentsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Batches -->
                    <div data-admin-content="batches" style="display: none;">
                        <button class="btn btn-primary" onclick="Admin.openAddBatchModal();">Add Batch</button>
                        <div id="batchesList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Students -->
                    <div data-admin-content="students" style="display: none;">
                        <button class="btn btn-primary" onclick="Admin.openAddStudentModal();">Add Student</button>
                        <div id="adminStudentsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Topics -->
                    <div data-admin-content="topics" style="display: none;">
                        <button class="btn btn-primary" onclick="AdminTopics.openModal();">Add Topic</button>
                        <div id="adminTopicsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Questions -->
                    <div data-admin-content="questions" style="display: none;">
                        <div style="display: grid; grid-template-columns: 300px 1fr 1fr; gap: 1.5rem;">
                            <!-- Questions List Panel -->
                            <div style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Questions</h3>
                                <button class="btn btn-primary" onclick="Questions.openModal()" style="width: 100%; margin-bottom: 1rem; font-size: 0.85rem;">Add Question</button>
                                <div id="adminQuestionsList" style="max-height: 600px; overflow-y: auto;"></div>
                            </div>

                            <!-- Question Edit Form Panel -->
                            <div style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Edit Question</h3>
                                <div id="adminQuestionFormPanel" style="max-height: 600px; overflow-y: auto;">
                                    <p style="color: #999; text-align: center;">Select a question to edit</p>
                                </div>
                            </div>

                            <!-- Question Details Panel -->
                            <div style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Details & Test Cases</h3>
                                <div id="adminQuestionDetailPanel" style="max-height: 600px; overflow-y: auto;">
                                    <p style="color: #999; text-align: center;">Select a question to view details</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes -->
                    <div data-admin-content="notes" style="display: none;">
                        <button class="btn btn-primary" onclick="AdminNotes.openModal();">Add Note</button>
                        <div id="adminNotesList" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- College Page -->
            <div id="collegePage" data-page="college" class="hidden">
                <h1>College Dashboard</h1>
                <div id="collegeMessage"></div>
                <div id="collegePerformance"></div>

                <div class="tabs" style="margin-top: 2rem;">
                    <button data-college-tab="departments" class="tab-btn active">Departments</button>
                    <button data-college-tab="batches" class="tab-btn">Batches</button>
                    <button data-college-tab="students" class="tab-btn">Students</button>
                </div>

                <div style="margin-top: 1.5rem;">
                    <!-- Departments -->
                    <div data-college-content="departments" style="display: block;">
                        <div id="collegeDepartmentsList"></div>
                    </div>

                    <!-- Batches -->
                    <div data-college-content="batches" style="display: none;">
                        <div id="collegeBatchesList"></div>
                    </div>

                    <!-- Students -->
                    <div data-college-content="students" style="display: none;">
                        <div id="collegeStudentsList"></div>
                    </div>
                </div>
            </div>

            <!-- Department Page -->
            <div id="departmentPage" data-page="department" class="hidden">
                <h1>Department Dashboard</h1>
                <div id="departmentMessage"></div>

                <div class="tabs">
                    <button data-dept-tab="topics" class="tab-btn active">Topics</button>
                    <button data-dept-tab="questions" class="tab-btn">Questions</button>
                    <button data-dept-tab="notes" class="tab-btn">Notes</button>
                    <button data-dept-tab="batches" class="tab-btn">Batches</button>
                    <button data-dept-tab="students" class="tab-btn">Students</button>
                </div>

                <div style="margin-top: 1.5rem;">
                    <!-- Topics -->
                    <div data-dept-content="topics" style="display: block;">
                        <button class="btn btn-primary" onclick="Department.openTopicModal();">Add Topic</button>
                        <div id="topicsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Questions -->
                    <div data-dept-content="questions" style="display: none;">
                        <button class="btn btn-primary" onclick="Questions.openModal();">Add Question</button>
                        <div id="questionsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Notes -->
                    <div data-dept-content="notes" style="display: none;">
                        <button class="btn btn-primary" onclick="Notes.openModal();">Add Note</button>
                        <div id="notesList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Batches -->
                    <div data-dept-content="batches" style="display: none;">
                        <div id="departmentBatchesList"></div>
                    </div>

                    <!-- Students -->
                    <div data-dept-content="students" style="display: none;">
                        <div id="departmentStudentsList"></div>
                    </div>
                </div>
            </div>

            <!-- Batch Page -->
            <div id="batchPage" data-page="batch" class="hidden">
                <h1>Batch Dashboard</h1>
                <div id="batchMessage"></div>

                <div class="tabs">
                    <button data-batch-tab="students" class="tab-btn active">Students</button>
                    <button data-batch-tab="topics" class="tab-btn">Topics</button>
                    <button data-batch-tab="questions" class="tab-btn">Questions</button>
                    <button data-batch-tab="notes" class="tab-btn">Notes</button>
                </div>

                <div style="margin-top: 1.5rem;">
                    <!-- Students -->
                    <div data-batch-content="students" style="display: block;">
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                            <button class="btn btn-primary" onclick="Batch.openAddStudentModal();">Add Student</button>
                            <button class="btn btn-success" onclick="Batch.openCSVModal();">Upload CSV</button>
                        </div>
                        <div id="batchStudentsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Topics -->
                    <div data-batch-content="topics" style="display: none;">
                        <button class="btn btn-primary" onclick="BatchTopics.openModal();">Add Topic</button>
                        <div id="batchTopicsList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Questions -->
                    <div data-batch-content="questions" style="display: none;">
                        <div style="display: grid; grid-template-columns: 300px 1fr 1fr; gap: 1.5rem;">
                            <!-- Topics Panel -->
                            <div
                                style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Topics</h3>
                                <div id="batchQuestionsTopicPanel" style="max-height: 600px; overflow-y: auto;"></div>
                            </div>

                            <!-- Questions Form & List Panel -->
                            <div
                                style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Questions</h3>

                                <!-- Form Section -->
                                <div
                                    style="background: white; padding: 1rem; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 1rem;">
                                    <input type="hidden" id="batchQuestionsFormId" />

                                    <div class="form-group" style="margin-bottom: 0.75rem;">
                                        <label style="font-size: 0.9rem; font-weight: bold;">Topic: <span
                                                style="color: red;">*</span></label>
                                        <select id="batchQuestionsFormTopic" required
                                            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                            <option value="">-- Select topic --</option>
                                        </select>
                                    </div>

                                    <div class="form-group" style="margin-bottom: 0.75rem;">
                                        <label style="font-size: 0.9rem; font-weight: bold;">Title: <span
                                                style="color: red;">*</span></label>
                                        <input type="text" id="batchQuestionsFormTitle" placeholder="Question title"
                                            required
                                            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" />
                                    </div>

                                    <div class="form-group" style="margin-bottom: 0.75rem;">
                                        <label style="font-size: 0.9rem; font-weight: bold;">Description: <span
                                                style="color: red;">*</span></label>
                                        <textarea id="batchQuestionsFormDescription" placeholder="Question description"
                                            required
                                            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; min-height: 80px;"></textarea>
                                    </div>

                                    <div class="form-group" style="margin-bottom: 0.75rem;">
                                        <label style="font-size: 0.9rem; font-weight: bold;">Sample Input: <span
                                                style="color: red;">*</span></label>
                                        <textarea id="batchQuestionsFormSampleInput" placeholder="Sample input" required
                                            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; min-height: 60px; font-family: monospace;"></textarea>
                                    </div>

                                    <div class="form-group" style="margin-bottom: 0.75rem;">
                                        <label style="font-size: 0.9rem; font-weight: bold;">Sample Output: <span
                                                style="color: red;">*</span></label>
                                        <textarea id="batchQuestionsFormSampleOutput" placeholder="Sample output"
                                            required
                                            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; min-height: 60px; font-family: monospace;"></textarea>
                                    </div>

                                    <div id="batchQuestionsFormMessage" style="margin-bottom: 0.75rem;"></div>

                                    <div style="display: flex; gap: 0.5rem;">
                                        <button class="btn btn-primary" onclick="BatchQuestions.saveInline()"
                                            style="flex: 1;">Create Question</button>
                                        <button class="btn btn-secondary" onclick="BatchQuestions.clearForm()"
                                            style="flex: 1;" id="batchQuestionsClearBtn"
                                            style="display: none;">Clear</button>
                                    </div>
                                </div>

                                <!-- Questions List Section -->
                                <div id="batchQuestionsListPanel" style="max-height: 400px; overflow-y: auto;"></div>
                            </div>

                            <!-- Question Detail Panel -->
                            <div
                                style="background: #f9f9f9; padding: 1rem; border-radius: 4px; border: 1px solid #ddd;">
                                <h3 style="margin-top: 0; margin-bottom: 1rem; font-size: 1rem;">Question Details</h3>
                                <div id="batchQuestionDetailPanel"
                                    style="max-height: 600px; overflow-y: auto; font-size: 0.95rem;">
                                    <p style="color: #999; text-align: center;">Select a question to view details</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes -->
                    <div data-batch-content="notes" style="display: none;">
                        <button class="btn btn-primary" onclick="BatchNotes.openModal();">Add Note</button>
                        <div id="batchNotesList" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- Student Practice Page -->
            <div id="studentPage" data-page="student" class="hidden">
                <h1>Practice Questions</h1>
                <div id="practiceMessage"></div>

                <!-- Tabs for Practice and Notes -->
                <div style="display: flex; gap: 0; border-bottom: 2px solid #ddd; margin-bottom: 1rem;">
                    <button class="btn btn-sm"
                        style="padding: 0.75rem 1.5rem; border: none; border-bottom: 3px solid #007bff; background: transparent; cursor: pointer; font-weight: bold; color: #007bff;"
                        onclick="StudentPractice.switchTab('practice')">
                        Practice
                    </button>
                    <button class="btn btn-sm"
                        style="padding: 0.75rem 1.5rem; border: none; border-bottom: 3px solid transparent; background: transparent; cursor: pointer; font-weight: bold; color: #666;"
                        onclick="StudentPractice.switchTab('notes')" id="notesTabBtn">
                        Study Notes
                    </button>
                </div>

                <!-- Debugging: Student Hierarchy Display -->
                <div id="studentHierarchy"
                    style="background: #f0f0f0; padding: 1rem; margin-bottom: 1rem; border-radius: 4px; border-left: 4px solid #007bff;">
                    <strong style="color: #333;">Your Profile:</strong>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-top: 0.5rem;">
                        <div>
                            <span style="font-size: 0.85rem; color: #666;">College:</span>
                            <p id="collegeDisplay" style="margin: 0.25rem 0 0 0; font-weight: bold; color: #333;">-</p>
                        </div>
                        <div>
                            <span style="font-size: 0.85rem; color: #666;">Department:</span>
                            <p id="departmentDisplay" style="margin: 0.25rem 0 0 0; font-weight: bold; color: #333;">-
                            </p>
                        </div>
                        <div>
                            <span style="font-size: 0.85rem; color: #666;">Batch:</span>
                            <p id="batchDisplay" style="margin: 0.25rem 0 0 0; font-weight: bold; color: #333;">-</p>
                        </div>
                        <div>
                            <span style="font-size: 0.85rem; color: #666;">Student ID:</span>
                            <p id="studentIdDisplay" style="margin: 0.25rem 0 0 0; font-weight: bold; color: #333;">-
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Practice Tab Content -->
                <div id="practiceTabContent" style="display: block; height: calc(100vh - 180px); overflow: hidden;">
                    
                    <!-- PHASE 1: Topics Selection (Full Page) -->
                    <div id="topicsPhasePanel" style="display: flex; flex-direction: column; height: 100%; overflow: hidden;">
                        <div style="padding: 2rem; border-bottom: 1px solid #e0e0e0; background: white;">
                            <h2 style="margin: 0; color: #333;">Select a Topic</h2>
                            <p style="margin: 0.5rem 0 0 0; color: #666;">Choose a topic to begin practicing</p>
                        </div>
                        <div style="flex: 1; overflow-y: auto; padding: 2rem;">
                            <div id="studentTopicsList" style="max-width: 600px;"></div>
                        </div>
                    </div>

                    <!-- PHASE 2: Questions Selection (Full Page) -->
                    <div id="questionsPhasePanel" style="display: none; flex-direction: column; height: 100%; overflow: hidden;">
                        <div style="padding: 2rem; border-bottom: 1px solid #e0e0e0; background: white; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h2 style="margin: 0; color: #333;">Select a Question</h2>
                                <p style="margin: 0.5rem 0 0 0; color: #666;">Choose a question to solve</p>
                            </div>
                            <button id="backToTopicsBtn" class="btn btn-secondary"
                                onclick="StudentPractice.goBackToTopics()">Back to Topics</button>
                        </div>
                        <div style="flex: 1; overflow-y: auto; padding: 2rem;">
                            <div id="studentQuestionsList" style="max-width: 600px;"></div>
                        </div>
                    </div>

                    <!-- PHASE 3: Code Editor (Full Page with LeetCode Layout) -->
                    <div id="editorPhasePanel" style="display: none; flex-direction: column; height: 100%; overflow: hidden;">
                        <div id="editorHeader"
                            style="padding: 1rem 2rem; border-bottom: 1px solid #e0e0e0; background: white; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h2 id="problemTitle" style="margin: 0; margin-bottom: 0.5rem; color: #333;">Select a Question to Start</h2>
                                <p id="problemDifficulty" style="margin: 0; color: #666; font-size: 0.9rem;">No question selected</p>
                            </div>
                            <button id="backToQuestionsBtn" class="btn btn-secondary"
                                onclick="StudentPractice.goBackToQuestions()">Back to Questions</button>
                        </div>

                        <!-- Problem Statement & Editor Container - LeetCode Style -->
                        <div id="problemEditorContainer"
                            style="flex: 1; display: grid; grid-template-columns: 45% 55%; gap: 0; overflow: hidden;">

                                <!-- Left: Problem Statement (Full Height, Scrollable) -->
                                <div id="problemSection"
                                    style="display: none; flex-direction: column; overflow-y: auto; border-right: 1px solid #e0e0e0; background: white;">
                                    
                                    <div style="padding: 1.5rem;">
                                        <h3 style="margin-top: 0; margin-bottom: 1rem;">Problem Statement</h3>
                                        <div id="problemDescription"
                                            style="line-height: 1.6; margin-bottom: 1.5rem; color: #333;">
                                        </div>

                                        <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Example</h3>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                            <div style="padding: 1rem; background: #f5f5f5; border-radius: 4px;">
                                                <h4 style="margin: 0 0 0.5rem 0; color: #555;">Input</h4>
                                                <pre id="exampleInput"
                                                    style="margin: 0; overflow-x: auto; font-size: 0.85rem; color: #333; font-family: 'Courier New';"></pre>
                                            </div>
                                            <div style="padding: 1rem; background: #f5f5f5; border-radius: 4px;">
                                                <h4 style="margin: 0 0 0.5rem 0; color: #555;">Output</h4>
                                                <pre id="exampleOutput"
                                                    style="margin: 0; overflow-x: auto; font-size: 0.85rem; color: #333; font-family: 'Courier New';"></pre>
                                            </div>
                                        </div>

                                        <div id="constraintsSection" style="display: none;">
                                            <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Constraints</h3>
                                            <div id="constraints"
                                                style="padding: 1rem; background: #f5f5f5; border-radius: 4px; margin-bottom: 1rem; color: #333;">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right: Code Editor (Full Height) -->
                                <div id="editorSection" style="display: none; flex-direction: column; background: #1e1e1e; color: #d4d4d4; overflow: hidden;">
                                    
                                    <!-- Editor Toolbar -->
                                    <div style="padding: 0.75rem 1rem; border-bottom: 1px solid #444; background: #252526; display: flex; justify-content: space-between; align-items: center;">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                        </div>
                                        <div style="display: flex; gap: 0.5rem;">
                                            <button class="btn btn-primary" id="runBtn" style="display: none; padding: 0.4rem 1rem; font-size: 0.9rem;"
                                                onclick="StudentPractice.runCode()">Run</button>
                                            <button class="btn btn-success" id="submitBtn" style="display: none; padding: 0.4rem 1rem; font-size: 0.9rem;"
                                                onclick="StudentPractice.submitCode()">Submit</button>
                                            <button class="btn btn-info" id="analyzeEfficiencyBtn" style="display: none; padding: 0.4rem 1rem; font-size: 0.9rem;"
                                                onclick="StudentPractice.analyzeEfficiency()">Analyze Efficiency</button>
                                        </div>
                                    </div>

                                    <!-- Code Editor -->
                                    <textarea id="codeEditor"
                                        style="flex: 1; font-family: 'Monaco', 'Courier New', monospace; padding: 1rem; border: none; font-size: 13px; background: #1e1e1e; color: #d4d4d4; resize: none; line-height: 1.5;"></textarea>
                                    
                                    <!-- Custom Test Cases Section (Collapsible) -->
                                    <div style="border-top: 1px solid #444; background: #252526;">
                                        <div style="padding: 0.75rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;" onclick="StudentPractice.toggleCustomTestCasesPanel()">
                                            <span style="font-size: 1.2rem; color: #d4d4d4;" id="customTestCasesToggle">â–¼</span>
                                            <span style="color: #d4d4d4; font-weight: bold;">Custom Test Cases</span>
                                        </div>
                                        
                                        <!-- Custom Test Cases Content -->
                                        <div id="customTestCasesPanel" style="padding: 1rem; display: none; max-height: 300px; overflow-y: auto; border-top: 1px solid #444;">
                                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <div>
                                                    <label style="display: block; font-size: 0.85rem; margin-bottom: 0.25rem; color: #a0aec0;">Input:</label>
                                                    <textarea id="customInput" placeholder="Enter custom input" 
                                                        style="width: 100%; height: 50px; padding: 0.5rem; border: 1px solid #555; border-radius: 4px; font-family: monospace; font-size: 12px; background: #1e1e1e; color: #d4d4d4; resize: none;"></textarea>
                                                </div>
                                                <div>
                                                    <label style="display: block; font-size: 0.85rem; margin-bottom: 0.25rem; color: #a0aec0;">Expected Output:</label>
                                                    <textarea id="customOutput" placeholder="Enter expected output"
                                                        style="width: 100%; height: 50px; padding: 0.5rem; border: 1px solid #555; border-radius: 4px; font-family: monospace; font-size: 12px; background: #1e1e1e; color: #d4d4d4; resize: none;"></textarea>
                                                </div>
                                            </div>
                                            <button class="btn btn-sm btn-secondary" onclick="StudentPractice.addCustomTestCase()"
                                                style="margin-bottom: 0.75rem;">Add Test Case</button>
                                            
                                            <!-- Custom Test Cases List -->
                                            <div id="customTestCasesList" style="display: none;"></div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Results Section (Full Width Below) -->
                            <div id="resultsSection"
                                style="border-top: 1px solid #444; padding: 1rem; background: #1e1e1e; color: #d4d4d4; max-height: 250px; overflow-y: auto; display: none;">
                                <div style="margin-bottom: 0.75rem;">
                                    <strong style="color: #a0aec0;">Test Results</strong>
                                    <span style="margin-left: 1rem; font-size: 0.85rem; cursor: pointer; color: #666;" onclick="StudentPractice.toggleResultsPanel()">Minimize</span>
                                </div>
                                <div id="testResults"></div>
                            </div>
                        </div>

                    </div>  <!-- End problemEditorContainer -->
                    </div>  <!-- End editorPhasePanel -->

                </div>  <!-- End practiceTabContent -->

                <!-- Notes Tab Content -->
                <div id="notesTabContent" style="display: none;">
                    <div style="max-width: 800px;">
                        <h2>Study Notes</h2>
                        <div id="studentNotesList"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->

    <!-- Question Modal for Admin -->
    <div id="questionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Question</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <input type="hidden" id="questionId" />

                <!-- Step 1: Hierarchy Selection (Admin Only) -->
                <div id="questionHierarchyStep" style="display: none;">
                    <h4 style="margin-bottom: 1rem; color: #333;">Select Hierarchy</h4>
                    
                    <div class="form-group">
                        <label>College: <span style="color: red;">*</span></label>
                        <select id="questionCollege" required onchange="Questions.loadDepartments(this.value)">
                            <option value="">-- Select College --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Department: <span style="color: red;">*</span></label>
                        <select id="questionDepartment" required onchange="Questions.loadBatches(this.value)">
                            <option value="">-- Select Department --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Batch: <span style="color: red;">*</span></label>
                        <select id="questionBatch" required onchange="Questions.loadTopics(this.value)">
                            <option value="">-- Select Batch --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Topic: <span style="color: red;">*</span></label>
                        <select id="questionTopic" required>
                            <option value="">-- Select Topic --</option>
                        </select>
                    </div>

                    <div style="border-top: 1px solid #ddd; padding-top: 1rem; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="Questions.proceedToQuestionDetails()" style="width: 100%;">Next: Add Question Details</button>
                    </div>
                </div>

                <!-- Step 2: Question Details -->
                <div id="questionDetailsStep" style="display: none;">
                    <h4 style="margin-bottom: 1rem; color: #333;">Question Details</h4>
                    
                    <div class="form-group">
                        <label>Title: <span style="color: red;">*</span></label>
                        <input type="text" id="questionTitle" required placeholder="Question title (min 3 chars)" />
                    </div>

                    <div class="form-group">
                        <label>Description: <span style="color: red;">*</span></label>
                        <textarea id="questionDescription" rows="4" required
                            placeholder="Detailed problem description (min 10 chars)"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Sample Input: <span style="color: red;">*</span></label>
                        <textarea id="questionSampleInput" rows="3" required placeholder="Example input data"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Sample Output: <span style="color: red;">*</span></label>
                        <textarea id="questionSampleOutput" rows="3" required
                            placeholder="Expected output for sample input"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Difficulty:</label>
                        <select id="questionDifficulty">
                            <option value="Easy">Easy</option>
                            <option value="Medium" selected>Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>

                    <div id="questionsMessage"></div>

                    <div style="border-top: 1px solid #ddd; padding-top: 1rem; margin-top: 1rem; display: flex; gap: 0.5rem;">
                        <button class="btn btn-secondary" onclick="Questions.backToHierarchy()" style="flex: 1;">Back</button>
                        <button class="btn btn-primary" onclick="Questions.save()" style="flex: 1;">Create Question</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="noteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Note</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="noteId" />
                <div class="form-group">
                    <label>Topic:</label>
                    <select id="noteTopic" required></select>
                </div>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="noteTitle" required />
                </div>
                <div class="form-group">
                    <label>Google Drive Link:</label>
                    <input type="url" id="noteLink" required />
                </div>
                <div id="notesMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('noteModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Notes.save()">Create Note</button>
            </div>
        </div>
    </div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Student</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="studentId" />
                <div class="form-group">
                    <label>College:</label>
                    <select id="studentCollege" required onchange="Admin.onStudentCollegeChange()"></select>
                </div>
                <div class="form-group">
                    <label>Department:</label>
                    <select id="studentDepartment" required disabled
                        onchange="Admin.onStudentDepartmentChange()"></select>
                </div>
                <div class="form-group">
                    <label>Batch:</label>
                    <select id="studentBatch" required disabled></select>
                </div>
                <div class="form-group">
                    <label>Username:</label>
                    <input type="text" id="studentUsername" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="studentEmail" required />
                </div>
                <div class="form-group" id="studentPassword">
                    <label>Password:</label>
                    <input type="password" id="studentPasswordInput" />
                </div>
                <div id="studentsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('studentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Admin.saveStudent()">Create Student</button>
            </div>
        </div>
    </div>

    <!-- College Modal -->
    <div id="collegeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add College</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="collegeId" />
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="collegeName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="collegeEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="collegePassword" required />
                </div>
                <div id="collegesMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('collegeModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Admin.saveCollege()">Create College</button>
            </div>
        </div>
    </div>

    <!-- Department Modal (for admin) -->
    <div id="departmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Department</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="departmentId" />
                <div class="form-group">
                    <label>College:</label>
                    <select id="departmentCollege" required></select>
                </div>
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="departmentName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="departmentEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="departmentPassword" required />
                </div>
                <div id="departmentsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('departmentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Admin.saveDepartment()">Create
                    Department</button>
            </div>
        </div>
    </div>

    <!-- Batch Modal -->
    <div id="batchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Batch</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="batchId" />
                <div class="form-group">
                    <label>College:</label>
                    <select id="batchCollege" required onchange="Admin.onBatchCollegeChange()"></select>
                </div>
                <div class="form-group">
                    <label>Department:</label>
                    <select id="batchDepartment" required disabled></select>
                </div>
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="batchName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="batchEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="batchPassword" required />
                </div>
                <div id="batchesMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('batchModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Admin.saveBatch()">Create Batch</button>
            </div>
        </div>
    </div>

    <!-- Topic Modal -->
    <div id="topicModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Topic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="topicId" />
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="topicName" required />
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="topicDescription" rows="4"></textarea>
                </div>
                <div id="topicsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('topicModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Department.saveTopic()">Create Topic</button>
            </div>
        </div>
    </div>

    <!-- College Department Modal -->
    <div id="collegeDepartmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Department</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="collegeDepartmentName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="collegeDepartmentEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="collegeDepartmentPassword" required />
                </div>
                <div id="collegeDepartmentMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('collegeDepartmentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="College.saveDepartment()">Create
                    Department</button>
            </div>
        </div>
    </div>

    <!-- College Batch Modal -->
    <div id="collegeBatchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Batch</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Department:</label>
                    <select id="collegeBatchDepartment" required></select>
                </div>
                <div class="form-group">
                    <label>Batch Name:</label>
                    <input type="text" id="collegeBatchName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="collegeBatchEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="collegeBatchPassword" required />
                </div>
                <div id="collegeBatchMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('collegeBatchModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="College.saveBatch()">Create Batch</button>
            </div>
        </div>
    </div>

    <!-- College Student Modal -->
    <div id="collegeStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Student</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Department:</label>
                    <select id="collegeStudentDepartment" onchange="College.onCollegeStudentDepartmentChange()"
                        required></select>
                </div>
                <div class="form-group">
                    <label>Batch:</label>
                    <select id="collegeStudentBatch" required></select>
                </div>
                <div class="form-group">
                    <label>Username:</label>
                    <input type="text" id="collegeStudentUsername" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="collegeStudentEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="collegeStudentPassword" required />
                </div>
                <div id="collegeStudentMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('collegeStudentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="College.saveStudent()">Create Student</button>
            </div>
        </div>
    </div>

    <!-- Department Batch Modal -->
    <div id="departmentBatchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Batch</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Batch Name:</label>
                    <input type="text" id="departmentBatchName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="departmentBatchEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="departmentBatchPassword" required />
                </div>
                <div id="departmentBatchMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('departmentBatchModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Department.saveBatch()">Create Batch</button>
            </div>
        </div>
    </div>

    <!-- Department Student Modal -->
    <div id="departmentStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Student</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Batch:</label>
                    <select id="departmentStudentBatch" required></select>
                </div>
                <div class="form-group">
                    <label>Username:</label>
                    <input type="text" id="departmentStudentUsername" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="departmentStudentEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="departmentStudentPassword" required />
                </div>
                <div id="departmentStudentMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('departmentStudentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Department.saveStudent()">Create Student</button>
            </div>
        </div>
    </div>

    <!-- Batch Student Modal -->
    <div id="batchStudentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Student</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="batchStudentId" />
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="batchStudentName" required />
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="batchStudentEmail" required />
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="batchStudentPassword" required />
                </div>
                <div id="batchStudentsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('batchStudentModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Batch.saveStudent()">Create Student</button>
            </div>
        </div>
    </div>

    <!-- CSV Upload Modal -->
    <div id="csvModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Students from CSV</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>CSV File (Name, Email, Password columns required):</label>
                    <input type="file" id="csvFile" accept=".csv" required />
                </div>
                <div style="margin: 1rem 0; padding: 1rem; background: #f0f0f0; border-radius: 4px;">
                    <strong>CSV Format Example:</strong>
                    <pre>Name,Email,Password
John Doe,john@example.com,password123
Jane Smith,jane@example.com,password456</pre>
                </div>
                <div id="csvMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('csvModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="Batch.uploadCSV()">Upload</button>
            </div>
        </div>
    </div>

    <!-- Batch Topic Modal -->
    <div id="batchTopicModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Topic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="batchTopicId" />
                <div class="form-group">
                    <label>Topic Name: <span style="color: red;">*</span></label>
                    <input type="text" id="batchTopicName" required placeholder="Topic name (min 2 chars)" />
                </div>
                <div id="batchTopicsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('batchTopicModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="BatchTopics.save()">Create Topic</button>
            </div>
        </div>
    </div>

    <!-- Batch Note Modal -->
    <div id="batchNoteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Note</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="batchNoteId" />
                <div class="form-group">
                    <label>Title: <span style="color: red;">*</span></label>
                    <input type="text" id="batchNoteTitle" required placeholder="Note title (min 2 chars)" />
                </div>
                <div class="form-group">
                    <label>Google Drive Link: <span style="color: red;">*</span></label>
                    <input type="url" id="batchNoteLink" required placeholder="https://drive.google.com/..." />
                </div>
                <div id="batchNotesMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('batchNoteModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="BatchNotes.save()">Create Note</button>
            </div>
        </div>
    </div>

    <!-- Batch Question Modal -->
    <div id="batchQuestionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="batchQuestionModalTitle">Add Question</h3>
                <button class="close-btn" onclick="UI.closeModal('batchQuestionModal')">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <input type="hidden" id="batchQuestionId" />

                <div class="form-group">
                    <label>Topic: <span style="color: red;">*</span></label>
                    <select id="batchQuestionTopic" required></select>
                </div>

                <div class="form-group">
                    <label>Title: <span style="color: red;">*</span></label>
                    <input type="text" id="batchQuestionTitle" required placeholder="Enter question title"
                        style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
                </div>

                <div class="form-group">
                    <label>Description: <span style="color: red;">*</span></label>
                    <textarea id="batchQuestionDescription" required placeholder="Enter question description"
                        style="min-height: 100px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Sample Input: <span style="color: red;">*</span></label>
                    <textarea id="batchQuestionSampleInput" required placeholder="Enter sample input"
                        style="min-height: 80px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Sample Output: <span style="color: red;">*</span></label>
                    <textarea id="batchQuestionSampleOutput" required placeholder="Enter sample output"
                        style="min-height: 80px;"></textarea>
                </div>

                <div id="batchQuestionsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('batchQuestionModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="BatchQuestions.save()">Create Question</button>
            </div>
        </div>
    </div>

    <!-- Admin Topic Modal -->
    <div id="adminTopicModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Topic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="adminTopicId" />

                <div class="form-group">
                    <label>College: <span style="color: red;">*</span></label>
                    <select id="adminTopicCollege" required onchange="AdminTopics.loadDepartments(this.value)"></select>
                </div>

                <div class="form-group">
                    <label>Department: <span style="color: red;">*</span></label>
                    <select id="adminTopicDepartment" required onchange="AdminTopics.loadBatches(this.value)"></select>
                </div>

                <div class="form-group">
                    <label>Batch: <span style="color: red;">*</span></label>
                    <select id="adminTopicBatch" required></select>
                </div>

                <hr style="margin: 1rem 0;">

                <div class="form-group">
                    <label>Topic Name: <span style="color: red;">*</span></label>
                    <input type="text" id="adminTopicName" required placeholder="Topic name (min 2 chars)" />
                </div>
                <div id="adminTopicsMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('adminTopicModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="AdminTopics.save()">Create Topic</button>
            </div>
        </div>
    </div>

    <!-- Admin Note Modal -->
    <div id="adminNoteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Note</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="adminNoteId" />

                <div class="form-group">
                    <label>College: <span style="color: red;">*</span></label>
                    <select id="adminNoteCollege" required onchange="AdminNotes.loadDepartments(this.value)"></select>
                </div>

                <div class="form-group">
                    <label>Department: <span style="color: red;">*</span></label>
                    <select id="adminNoteDepartment" required onchange="AdminNotes.loadBatches(this.value)"></select>
                </div>

                <div class="form-group">
                    <label>Batch: <span style="color: red;">*</span></label>
                    <select id="adminNoteBatch" required></select>
                </div>

                <hr style="margin: 1rem 0;">

                <div class="form-group">
                    <label>Title: <span style="color: red;">*</span></label>
                    <input type="text" id="adminNoteTitle" required placeholder="Note title (min 2 chars)" />
                </div>
                <div class="form-group">
                    <label>Google Drive Link: <span style="color: red;">*</span></label>
                    <input type="url" id="adminNoteLink" required placeholder="https://drive.google.com/..." />
                </div>
                <div id="adminNotesMessage"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('adminNoteModal')">Cancel</button>
                <button class="btn btn-primary" type="submit" onclick="AdminNotes.save()">Create Note</button>
            </div>
        </div>
    </div>

    <!-- Scripts - Load in correct order -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/questions-rbac.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/students.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/admin-topics.js"></script>
    <script src="js/admin-notes.js"></script>
    <script src="js/college.js"></script>
    <script src="js/department.js"></script>
    <script src="js/batch.js"></script>
    <script src="js/batch-topics.js"></script>
    <script src="js/batch-questions.js"></script>
    <script src="js/batch-testcase-generator.js"></script>
    <script src="js/batch-notes.js"></script>
    <script src="js/student.js"></script>
    <script src="js/ui.js"></script>
</body>

</html>